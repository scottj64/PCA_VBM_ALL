<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="33,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T10U3">Rot</span>=Euler2RotMatrix(<span class="var type1" id="S3T12U6">angles</span>,<span class="var type2" id="S4T4V3U7">n</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="33,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="33,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T4:U4"><span class="var type1" id="S5T4U10">roll</span>=<span class="mxinfo " id="T4:U6"><span class="var type1" id="S3T12U12">angles</span>(<span class="mxinfo " id="T13:U8">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T4:U9"><span class="var type1" id="S6T4U16">yaw</span>=<span class="mxinfo " id="T4:U11"><span class="var type1" id="S3T12U18">angles</span>(<span class="mxinfo " id="T13:U13">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T4:U14"><span class="var type1" id="S7T4U22">pitch</span>=<span class="mxinfo " id="T4:U16"><span class="var type1" id="S3T12U24">angles</span>(<span class="mxinfo " id="T13:U18">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="33,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T35:U19"><span class="keyword">switch</span> <span class="var type1" id="S4T4U27">n</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,8" id="srcline8"> 8</a></span><span class="line">    <span class="keyword">case</span> 1</span></span>
<span class="srcline"><span class="lineno"><a href="33,9" id="srcline9"> 9</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,10" id="srcline10">10</a></span><span class="line">        <span class="var type0" id="S8T0U32">P</span>=[cos(-<span class="var type0" id="S7T0U38">pitch</span>) 0 sin(-<span class="var type0" id="S7T0U43">pitch</span>);0 1 0;-sin(-<span class="var type0" id="S7T0U53">pitch</span>) 0 cos(-<span class="var type0" id="S7T0U58">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,11" id="srcline11">11</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,12" id="srcline12">12</a></span><span class="line">        <span class="var type0" id="S11T0U61">Y</span>=[1 0 0;0 cos(-<span class="var type0" id="S6T0U72">yaw</span>) -sin(-<span class="var type0" id="S6T0U77">yaw</span>);0 sin(-<span class="var type0" id="S6T0U83">yaw</span>) cos(-<span class="var type0" id="S6T0U87">yaw</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,13" id="srcline13">13</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,14" id="srcline14">14</a></span><span class="line">        <span class="var type0" id="S12T0U90">R</span>=[cos(-<span class="var type0" id="S5T0U96">roll</span>),-sin(-<span class="var type0" id="S5T0U101">roll</span>),0;sin(-<span class="var type0" id="S5T0U107">roll</span>),cos(-<span class="var type0" id="S5T0U111">roll</span>),0;0,0,1];</span></span>
<span class="srcline"><span class="lineno"><a href="33,15" id="srcline15">15</a></span><span class="line">    <span class="keyword">case</span> 2</span></span>
<span class="srcline"><span class="lineno"><a href="33,16" id="srcline16">16</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,17" id="srcline17">17</a></span><span class="line">        <span class="mxinfo " id="T10:U21"><span class="var type1" id="S8T10U121">P</span>=<span class="mxinfo " id="T10:U23">[<span class="mxinfo " id="T12:U24"><span class="mxinfo " id="T4:U25">cos(<span class="var type1" id="S7T4U126">pitch</span>)</span> <span class="mxinfo " id="T4:U27">0</span> <span class="mxinfo " id="T4:U28">sin(<span class="var type1" id="S7T4U130">pitch</span>)</span></span>;<span class="mxinfo " id="T12:U30">0 1 0</span>;<span class="mxinfo " id="T12:U31"><span class="mxinfo " id="T4:U32">-<span class="mxinfo " id="T4:U33">sin(<span class="var type1" id="S7T4U139">pitch</span>)</span></span> <span class="mxinfo " id="T4:U35">0</span> <span class="mxinfo " id="T4:U36">cos(<span class="var type1" id="S7T4U143">pitch</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,18" id="srcline18">18</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T10:U38"><span class="var type1" id="S11T10U146">Y</span>=<span class="mxinfo " id="T10:U40">[<span class="mxinfo " id="T12:U41">1 0 0</span>;<span class="mxinfo " id="T12:U42"><span class="mxinfo " id="T4:U43">0</span> <span class="mxinfo " id="T4:U44">cos(<span class="var type1" id="S6T4U156">yaw</span>)</span> <span class="mxinfo " id="T4:U46">-<span class="mxinfo " id="T4:U47">sin(<span class="var type1" id="S6T4U160">yaw</span>)</span></span></span>;<span class="mxinfo " id="T12:U49"><span class="mxinfo " id="T4:U50">0</span> <span class="mxinfo " id="T4:U51">sin(<span class="var type1" id="S6T4U165">yaw</span>)</span> <span class="mxinfo " id="T4:U53">cos(<span class="var type1" id="S6T4U168">yaw</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,20" id="srcline20">20</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,21" id="srcline21">21</a></span><span class="line">        <span class="mxinfo " id="T10:U55"><span class="var type1" id="S12T10U171">R</span>=<span class="mxinfo " id="T10:U57">[<span class="mxinfo " id="T12:U58"><span class="mxinfo " id="T4:U59">cos(<span class="mxinfo " id="T4:U60">-<span class="var type1" id="S5T4U177">roll</span></span>)</span>,<span class="mxinfo " id="T4:U62">-<span class="mxinfo " id="T4:U63">sin(<span class="mxinfo " id="T4:U64">-<span class="var type1" id="S5T4U182">roll</span></span>)</span></span>,<span class="mxinfo " id="T4:U66">0</span></span>;<span class="mxinfo " id="T12:U67"><span class="mxinfo " id="T4:U68">sin(<span class="mxinfo " id="T4:U69">-<span class="var type1" id="S5T4U188">roll</span></span>)</span>,<span class="mxinfo " id="T4:U71">cos(<span class="mxinfo " id="T4:U72">-<span class="var type1" id="S5T4U192">roll</span></span>)</span>,<span class="mxinfo " id="T4:U74">0</span></span>;<span class="mxinfo " id="T12:U75">0,0,1</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,22" id="srcline22">22</a></span><span class="line">    <span class="keyword">case</span> 3</span></span>
<span class="srcline"><span class="lineno"><a href="33,23" id="srcline23">23</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,24" id="srcline24">24</a></span><span class="line">        <span class="var type0" id="S8T0U202">P</span>=[cos(-<span class="var type0" id="S7T0U208">pitch</span>) 0 sin(-<span class="var type0" id="S7T0U213">pitch</span>);0 1 0;-sin(-<span class="var type0" id="S7T0U223">pitch</span>) 0 cos(-<span class="var type0" id="S7T0U228">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,25" id="srcline25">25</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,26" id="srcline26">26</a></span><span class="line">        <span class="var type0" id="S11T0U231">Y</span>=[cos(-<span class="var type0" id="S6T0U237">yaw</span>) -sin(-<span class="var type0" id="S6T0U242">yaw</span>) 0;sin(-<span class="var type0" id="S6T0U248">yaw</span>) cos(-<span class="var type0" id="S6T0U252">yaw</span>) 0;0 0 1];</span></span>
<span class="srcline"><span class="lineno"><a href="33,27" id="srcline27">27</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,28" id="srcline28">28</a></span><span class="line">        <span class="var type0" id="S12T0U260">R</span>=[1 0 0;0 cos(-<span class="var type0" id="S5T0U271">roll</span>) -sin(-<span class="var type0" id="S5T0U276">roll</span>);0 sin(-<span class="var type0" id="S5T0U282">roll</span>) cos(-<span class="var type0" id="S5T0U286">roll</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,29" id="srcline29">29</a></span><span class="line">    <span class="keyword">case</span> 4</span></span>
<span class="srcline"><span class="lineno"><a href="33,30" id="srcline30">30</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,31" id="srcline31">31</a></span><span class="line">        <span class="var type0" id="S8T0U291">P</span>=[1 0 0;0 cos(<span class="var type0" id="S7T0U301">pitch</span>) -sin(<span class="var type0" id="S7T0U305">pitch</span>);0 sin(<span class="var type0" id="S7T0U310">pitch</span>) cos(<span class="var type0" id="S7T0U313">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,32" id="srcline32">32</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,33" id="srcline33">33</a></span><span class="line">        <span class="var type0" id="S11T0U316">Y</span>=[cos(-<span class="var type0" id="S6T0U322">yaw</span>) -sin(-<span class="var type0" id="S6T0U327">yaw</span>) 0;sin(-<span class="var type0" id="S6T0U333">yaw</span>) cos(-<span class="var type0" id="S6T0U337">yaw</span>) 0;0 0 1];</span></span>
<span class="srcline"><span class="lineno"><a href="33,34" id="srcline34">34</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,35" id="srcline35">35</a></span><span class="line">        <span class="var type0" id="S12T0U345">R</span>=[cos(<span class="var type0" id="S5T0U350">roll</span>) 0 sin(<span class="var type0" id="S5T0U354">roll</span>);0 1 0;-sin(<span class="var type0" id="S5T0U363">roll</span>) 0 cos(<span class="var type0" id="S5T0U367">roll</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,36" id="srcline36">36</a></span><span class="line">    <span class="keyword">case</span> 5</span></span>
<span class="srcline"><span class="lineno"><a href="33,37" id="srcline37">37</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,38" id="srcline38">38</a></span><span class="line">        <span class="var type0" id="S8T0U372">P</span>=[cos(<span class="var type0" id="S7T0U377">pitch</span>) 0 sin(<span class="var type0" id="S7T0U381">pitch</span>);0 1 0;-sin(<span class="var type0" id="S7T0U390">pitch</span>) 0 cos(<span class="var type0" id="S7T0U394">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,39" id="srcline39">39</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,40" id="srcline40">40</a></span><span class="line">        <span class="var type0" id="S11T0U397">Y</span>=[cos(-<span class="var type0" id="S6T0U403">yaw</span>) -sin(-<span class="var type0" id="S6T0U408">yaw</span>) 0;sin(-<span class="var type0" id="S6T0U414">yaw</span>) cos(-<span class="var type0" id="S6T0U418">yaw</span>) 0;0 0 1];</span></span>
<span class="srcline"><span class="lineno"><a href="33,41" id="srcline41">41</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,42" id="srcline42">42</a></span><span class="line">        <span class="var type0" id="S12T0U426">R</span>=[1 0 0;0 cos(-<span class="var type0" id="S5T0U437">roll</span>) -sin(-<span class="var type0" id="S5T0U442">roll</span>);0 sin(-<span class="var type0" id="S5T0U448">roll</span>) cos(-<span class="var type0" id="S5T0U452">roll</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="33,43" id="srcline43">43</a></span><span class="line"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="33,44" id="srcline44">44</a></span><span class="line"><span class="comment">%Pitch, row, yaw order</span></span></span>
<span class="srcline"><span class="lineno"><a href="33,45" id="srcline45">45</a></span><span class="line"><span class="mxinfo " id="T10:U76"><span class="var type1" id="S2T10U455">Rot</span>=<span class="mxinfo " id="T10:U78"><span class="mxinfo " id="T10:U79"><span class="var type1" id="S8T10U458">P</span>*<span class="var type1" id="S11T10U459">Y</span></span>*<span class="var type1" id="S12T10U460">R</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="33,46" id="srcline46">46</a></span><span class="line">        </span></span>
</pre>
