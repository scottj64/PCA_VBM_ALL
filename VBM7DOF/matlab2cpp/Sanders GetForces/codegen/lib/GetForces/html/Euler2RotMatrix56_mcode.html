<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="32,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T10U3">Rot</span>=Euler2RotMatrix(<span class="var type1" id="S3T12U6">angles</span>,<span class="var type2" id="S4T4V2U7">n</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="32,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="32,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T4:U4"><span class="var type1" id="S5T4U10">roll</span>=<span class="mxinfo " id="T4:U6"><span class="var type1" id="S3T12U12">angles</span>(<span class="mxinfo " id="T13:U8">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T4:U9"><span class="var type1" id="S6T4U16">yaw</span>=<span class="mxinfo " id="T4:U11"><span class="var type1" id="S3T12U18">angles</span>(<span class="mxinfo " id="T13:U13">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T4:U14"><span class="var type1" id="S7T4U22">pitch</span>=<span class="mxinfo " id="T4:U16"><span class="var type1" id="S3T12U24">angles</span>(<span class="mxinfo " id="T13:U18">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="32,7" id="srcline7"> 7</a></span><span class="line"><span class="keyword">switch</span> <span class="var type1" id="S4T4U27">n</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,8" id="srcline8"> 8</a></span><span class="line">    <span class="keyword">case</span> 1</span></span>
<span class="srcline"><span class="lineno"><a href="32,9" id="srcline9"> 9</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,10" id="srcline10">10</a></span><span class="line">        <span class="var type0" id="S8T0U32">P</span>=[cos(-<span class="var type0" id="S7T0U38">pitch</span>) 0 sin(-<span class="var type0" id="S7T0U43">pitch</span>);0 1 0;-sin(-<span class="var type0" id="S7T0U53">pitch</span>) 0 cos(-<span class="var type0" id="S7T0U58">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,11" id="srcline11">11</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,12" id="srcline12">12</a></span><span class="line">        <span class="var type0" id="S11T0U61">Y</span>=[1 0 0;0 cos(-<span class="var type0" id="S6T0U72">yaw</span>) -sin(-<span class="var type0" id="S6T0U77">yaw</span>);0 sin(-<span class="var type0" id="S6T0U83">yaw</span>) cos(-<span class="var type0" id="S6T0U87">yaw</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,13" id="srcline13">13</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,14" id="srcline14">14</a></span><span class="line">        <span class="var type0" id="S12T0U90">R</span>=[cos(-<span class="var type0" id="S5T0U96">roll</span>),-sin(-<span class="var type0" id="S5T0U101">roll</span>),0;sin(-<span class="var type0" id="S5T0U107">roll</span>),cos(-<span class="var type0" id="S5T0U111">roll</span>),0;0,0,1];</span></span>
<span class="srcline"><span class="lineno"><a href="32,15" id="srcline15">15</a></span><span class="line">    <span class="keyword">case</span> 2</span></span>
<span class="srcline"><span class="lineno"><a href="32,16" id="srcline16">16</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,17" id="srcline17">17</a></span><span class="line">        <span class="var type0" id="S8T0U121">P</span>=[cos(<span class="var type0" id="S7T0U126">pitch</span>) 0 sin(<span class="var type0" id="S7T0U130">pitch</span>);0 1 0;-sin(<span class="var type0" id="S7T0U139">pitch</span>) 0 cos(<span class="var type0" id="S7T0U143">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,18" id="srcline18">18</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,19" id="srcline19">19</a></span><span class="line">        <span class="var type0" id="S11T0U146">Y</span>=[1 0 0;0 cos(<span class="var type0" id="S6T0U156">yaw</span>) -sin(<span class="var type0" id="S6T0U160">yaw</span>);0 sin(<span class="var type0" id="S6T0U165">yaw</span>) cos(<span class="var type0" id="S6T0U168">yaw</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,20" id="srcline20">20</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,21" id="srcline21">21</a></span><span class="line">        <span class="var type0" id="S12T0U171">R</span>=[cos(-<span class="var type0" id="S5T0U177">roll</span>),-sin(-<span class="var type0" id="S5T0U182">roll</span>),0;sin(-<span class="var type0" id="S5T0U188">roll</span>),cos(-<span class="var type0" id="S5T0U192">roll</span>),0;0,0,1];</span></span>
<span class="srcline"><span class="lineno"><a href="32,22" id="srcline22">22</a></span><span class="line">    <span class="keyword">case</span> 3</span></span>
<span class="srcline"><span class="lineno"><a href="32,23" id="srcline23">23</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,24" id="srcline24">24</a></span><span class="line">        <span class="var type0" id="S8T0U202">P</span>=[cos(-<span class="var type0" id="S7T0U208">pitch</span>) 0 sin(-<span class="var type0" id="S7T0U213">pitch</span>);0 1 0;-sin(-<span class="var type0" id="S7T0U223">pitch</span>) 0 cos(-<span class="var type0" id="S7T0U228">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,25" id="srcline25">25</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,26" id="srcline26">26</a></span><span class="line">        <span class="var type0" id="S11T0U231">Y</span>=[cos(-<span class="var type0" id="S6T0U237">yaw</span>) -sin(-<span class="var type0" id="S6T0U242">yaw</span>) 0;sin(-<span class="var type0" id="S6T0U248">yaw</span>) cos(-<span class="var type0" id="S6T0U252">yaw</span>) 0;0 0 1];</span></span>
<span class="srcline"><span class="lineno"><a href="32,27" id="srcline27">27</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,28" id="srcline28">28</a></span><span class="line">        <span class="var type0" id="S12T0U260">R</span>=[1 0 0;0 cos(-<span class="var type0" id="S5T0U271">roll</span>) -sin(-<span class="var type0" id="S5T0U276">roll</span>);0 sin(-<span class="var type0" id="S5T0U282">roll</span>) cos(-<span class="var type0" id="S5T0U286">roll</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,29" id="srcline29">29</a></span><span class="line">    <span class="keyword">case</span> 4</span></span>
<span class="srcline"><span class="lineno"><a href="32,30" id="srcline30">30</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,31" id="srcline31">31</a></span><span class="line">        <span class="var type0" id="S8T0U291">P</span>=[1 0 0;0 cos(<span class="var type0" id="S7T0U301">pitch</span>) -sin(<span class="var type0" id="S7T0U305">pitch</span>);0 sin(<span class="var type0" id="S7T0U310">pitch</span>) cos(<span class="var type0" id="S7T0U313">pitch</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,32" id="srcline32">32</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,33" id="srcline33">33</a></span><span class="line">        <span class="var type0" id="S11T0U316">Y</span>=[cos(-<span class="var type0" id="S6T0U322">yaw</span>) -sin(-<span class="var type0" id="S6T0U327">yaw</span>) 0;sin(-<span class="var type0" id="S6T0U333">yaw</span>) cos(-<span class="var type0" id="S6T0U337">yaw</span>) 0;0 0 1];</span></span>
<span class="srcline"><span class="lineno"><a href="32,34" id="srcline34">34</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,35" id="srcline35">35</a></span><span class="line">        <span class="var type0" id="S12T0U345">R</span>=[cos(<span class="var type0" id="S5T0U350">roll</span>) 0 sin(<span class="var type0" id="S5T0U354">roll</span>);0 1 0;-sin(<span class="var type0" id="S5T0U363">roll</span>) 0 cos(<span class="var type0" id="S5T0U367">roll</span>)];</span></span>
<span class="srcline"><span class="lineno"><a href="32,36" id="srcline36">36</a></span><span class="line">    <span class="keyword">case</span> 5</span></span>
<span class="srcline"><span class="lineno"><a href="32,37" id="srcline37">37</a></span><span class="line">        <span class="comment">%rotation about y-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,38" id="srcline38">38</a></span><span class="line">        <span class="mxinfo " id="T10:U20"><span class="var type1" id="S8T10U372">P</span>=<span class="mxinfo " id="T10:U22">[<span class="mxinfo " id="T12:U23"><span class="mxinfo " id="T4:U24">cos(<span class="var type1" id="S7T4U377">pitch</span>)</span> <span class="mxinfo " id="T4:U26">0</span> <span class="mxinfo " id="T4:U27">sin(<span class="var type1" id="S7T4U381">pitch</span>)</span></span>;<span class="mxinfo " id="T12:U29">0 1 0</span>;<span class="mxinfo " id="T12:U30"><span class="mxinfo " id="T4:U31">-<span class="mxinfo " id="T4:U32">sin(<span class="var type1" id="S7T4U390">pitch</span>)</span></span> <span class="mxinfo " id="T4:U34">0</span> <span class="mxinfo " id="T4:U35">cos(<span class="var type1" id="S7T4U394">pitch</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,39" id="srcline39">39</a></span><span class="line">        <span class="comment">%rotation about z-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,40" id="srcline40">40</a></span><span class="line">        <span class="mxinfo " id="T10:U37"><span class="var type1" id="S11T10U397">Y</span>=<span class="mxinfo " id="T10:U39">[<span class="mxinfo " id="T12:U40"><span class="mxinfo " id="T4:U41">cos(<span class="mxinfo " id="T4:U42">-<span class="var type1" id="S6T4U403">yaw</span></span>)</span> <span class="mxinfo " id="T4:U44">-<span class="mxinfo " id="T4:U45">sin(<span class="mxinfo " id="T4:U46">-<span class="var type1" id="S6T4U408">yaw</span></span>)</span></span> <span class="mxinfo " id="T4:U48">0</span></span>;<span class="mxinfo " id="T12:U49"><span class="mxinfo " id="T4:U50">sin(<span class="mxinfo " id="T4:U51">-<span class="var type1" id="S6T4U414">yaw</span></span>)</span> <span class="mxinfo " id="T4:U53">cos(<span class="mxinfo " id="T4:U54">-<span class="var type1" id="S6T4U418">yaw</span></span>)</span> <span class="mxinfo " id="T4:U56">0</span></span>;<span class="mxinfo " id="T12:U57">0 0 1</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,41" id="srcline41">41</a></span><span class="line">        <span class="comment">%rotation about x-axis</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,42" id="srcline42">42</a></span><span class="line">        <span class="mxinfo " id="T10:U58"><span class="var type1" id="S12T10U426">R</span>=<span class="mxinfo " id="T10:U60">[<span class="mxinfo " id="T12:U61">1 0 0</span>;<span class="mxinfo " id="T12:U62"><span class="mxinfo " id="T4:U63">0</span> <span class="mxinfo " id="T4:U64">cos(<span class="mxinfo " id="T4:U65">-<span class="var type1" id="S5T4U437">roll</span></span>)</span> <span class="mxinfo " id="T4:U67">-<span class="mxinfo " id="T4:U68">sin(<span class="mxinfo " id="T4:U69">-<span class="var type1" id="S5T4U442">roll</span></span>)</span></span></span>;<span class="mxinfo " id="T12:U71"><span class="mxinfo " id="T4:U72">0</span> <span class="mxinfo " id="T4:U73">sin(<span class="mxinfo " id="T4:U74">-<span class="var type1" id="S5T4U448">roll</span></span>)</span> <span class="mxinfo " id="T4:U76">cos(<span class="mxinfo " id="T4:U77">-<span class="var type1" id="S5T4U452">roll</span></span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,43" id="srcline43">43</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,44" id="srcline44">44</a></span><span class="line"><span class="comment">%Pitch, row, yaw order</span></span></span>
<span class="srcline"><span class="lineno"><a href="32,45" id="srcline45">45</a></span><span class="line"><span class="mxinfo " id="T10:U79"><span class="var type1" id="S2T10U455">Rot</span>=<span class="mxinfo " id="T10:U81"><span class="mxinfo " id="T10:U82"><span class="var type1" id="S8T10U458">P</span>*<span class="var type1" id="S11T10U459">Y</span></span>*<span class="var type1" id="S12T10U460">R</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="32,46" id="srcline46">46</a></span><span class="line">        </span></span>
</pre>
